You need to write a complete script based on the given topic "{topic}" and the provided plotline "{plotline}". Please strictly follow the steps below to perform this task. Ensure that the plotline is central to all stages of the script generation process.



### Step 1:
Plan three coherent scenes based on the topic and the provided plotline. Assign a sub-topic to each scene, select corresponding locations and main characters based on the sub-topic, and develop a plot for each scene that aligns with the plotline.

This step may require the following information:
#### Main Characters:
1. **Combatants**: {combatant_characters}

#### Main Locations:
1. **Race Track**: features stunt ramps, obstacles, and high-speed paths.
2. **Desert Arena**: features open terrains, dune ramps, and destructible obstacles.
3. **Urban Streets**: features narrow alleys, sharp turns, and destructible buildings.
4. **VR Simulation Room**: features dynamic virtual environments for vehicular combat.

After this step, the following parts of the script will be completed:
"scene_information": {"who": [Selected Combatants], "where": "Selected Location", "what": "The Plot For This Scene"}



### Step 2:
Create specific and vivid dialogues for each scene based on the result from step 1 and the provided plotline. The dialogues should conform to the characters' profile and reflect the emotional and narrative elements of the plotline. The number of conversations in one scene should not be too few.

This step may require the following information:
#### Characters' Profile:
{profiles}

After this step, the following parts of the script will be completed:
"dialogues":[{"speaker": "...", "content": "..."}, ...]



### Step 3:
Choose an appropriate position for each character in every scene of the script based on the result from step 1 and the plotline. Ensure that the positions enhance the narrative flow and align with the plotline's requirements. In a scene, each character's position must be different.

This step may require the following information:
#### Optional Positions:
{optional_positions}

After this step, the following parts of the script will be completed:
"initial position": [{"character": "...", "position": "Position XX"}, ...]



### Step 4:
Understand the emotions expressed in the dialogues from step 2, and consider the emotional states of the combatants in the conversation. Use the plotline to guide your understanding of the narrative context. According to your considerations and [Action Selection Requirements], choose the most appropriate vehicular actions from the [Complete List of Actions] and add them after each line of dialogue, including the speaker and some other (not all) combatants' actions.

Each action added should consist of the following parts:
   - action: The action selected from [Complete List of Actions].
   - combatant: The combatant that performs the action.
   - vehicle state: The state of the vehicle before the action is performed, including stationary or moving.

This step may require the following information:
#### [Complete List of Actions]:
{all_vehicular_actions}


#### [Action Selection Requirements]:

1. **Basic Requirements**:
   - Note that all actions should be selected from [Complete List of Actions].
   - Each character can only add one action at a time.
   - Unnecessary actions should not be added to avoid cluttering the scene.

2. **Key Requirements**:
   - In one scene, you cannot overuse a certain action.
   - When a character is in the standing state, you can only choose the action performed in standing state. When a character is in the sitting state, you can only choose the action performed in sitting state.
   - You can choose "Sit Down" only when the character is at a sittable position.
   - Only by using "Stand Up" or "Sit Down" can the character's state be changed; otherwise, the character's state should remain the same as before.

After this step, the following parts of the script will be completed:
"actions": [{"character": "...","state": "....","action": "..."}, ...]



### Step 5:
Focus on the usage conditions of each shot in the [Complete List of Shots], then allocate them to the shot annotation points in the script according to different usage conditions. Ensure the shots capture the intensity of vehicular combat, stunts, and explosions, while aligning with the narrative and emotional beats of the plotline. Check if the shot annotations meet the [Shot Annotation Requirements]. If not, identify which requirements are not met, then update the shot annotations to meet these requirements.

This step may require the following information:
#### [Complete List of Shots]:
{all_combat_shots}


#### [Shot Annotation Requirements]:
   - Each scene should not have too many close shots and mid shots.
   - Each shot used must meet its usage conditions.
   - For the dialogue-starting scene, you should choose between [Track Shot, Long Shot] to set the context.
   - If you want to use Zoom Shot, you must ensure the preceding shot is a Long Shot
   - If you want to use Pan Shot during dialogue, it should be used multiple times in a row.

After this step, the following parts of the script will be completed:
"selected shot": "..."



After completing all steps, return your completed script. Your response should only contain the following JSON content:
```json
[{"scene_information": {"who": ["...", ...], "where": "...", "what": "..."},
"dialogues":[{"speaker": "...", "content": "...", "actions": [{"character": "...","state": "....","action": "..."}, ...], "selected shot": "...."}, ...]
},
...]
```